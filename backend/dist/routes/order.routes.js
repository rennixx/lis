"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = require("express");
const order_controller_1 = require("../controllers/order.controller");
const auth_middleware_1 = require("../middlewares/auth.middleware");
const validation_middleware_1 = require("../middlewares/validation.middleware");
const router = (0, express_1.Router)();
const orderController = new order_controller_1.OrderController();
router.use(auth_middleware_1.authenticate);
router.post('/', (0, auth_middleware_1.authorize)('admin', 'doctor', 'nurse', 'receptionist'), validation_middleware_1.validateRequest, orderController.createOrder);
router.get('/', (0, auth_middleware_1.authorize)('admin', 'doctor', 'lab_technician', 'nurse', 'receptionist'), orderController.getAllOrders);
router.get('/statistics', (0, auth_middleware_1.authorize)('admin', 'doctor', 'lab_technician'), orderController.getOrderStatistics);
router.get('/recent', (0, auth_middleware_1.authorize)('admin', 'doctor', 'lab_technician', 'nurse', 'receptionist'), orderController.getRecentOrders);
router.get('/overdue', (0, auth_middleware_1.authorize)('admin', 'lab_technician'), orderController.getOverdueOrders);
router.get('/number/:orderNumber', (0, auth_middleware_1.authorize)('admin', 'doctor', 'lab_technician', 'nurse', 'receptionist'), orderController.getOrderByNumber);
router.get('/:orderId', (0, auth_middleware_1.authorize)('admin', 'doctor', 'lab_technician', 'nurse', 'receptionist'), orderController.getOrderById);
router.put('/:orderId', (0, auth_middleware_1.authorize)('admin', 'doctor', 'nurse', 'receptionist'), validation_middleware_1.validateRequest, orderController.updateOrder);
router.delete('/:orderId', (0, auth_middleware_1.authorize)('admin'), orderController.deleteOrder);
router.patch('/:orderId/status', (0, auth_middleware_1.authorize)('admin', 'doctor', 'lab_technician', 'nurse'), orderController.updateOrderStatus);
router.post('/:orderId/collect-sample', (0, auth_middleware_1.authorize)('lab_technician', 'nurse'), orderController.markSampleCollected);
router.post('/:orderId/complete', (0, auth_middleware_1.authorize)('lab_technician'), orderController.completeOrder);
router.post('/:orderId/cancel', (0, auth_middleware_1.authorize)('admin', 'doctor'), orderController.cancelOrder);
router.post('/:orderId/tests', (0, auth_middleware_1.authorize)('admin', 'doctor', 'nurse', 'receptionist'), validation_middleware_1.validateRequest, orderController.addTestToOrder);
router.delete('/:orderId/tests/:testId', (0, auth_middleware_1.authorize)('admin', 'doctor', 'nurse', 'receptionist'), orderController.removeTestFromOrder);
router.patch('/:orderId/payment', (0, auth_middleware_1.authorize)('admin', 'nurse', 'receptionist'), orderController.updateOrderPayment);
router.post('/bulk-create', (0, auth_middleware_1.authorize)('admin', 'nurse', 'receptionist'), validation_middleware_1.validateRequest, orderController.bulkCreateOrders);
router.patch('/bulk-status', (0, auth_middleware_1.authorize)('admin', 'lab_technician'), validation_middleware_1.validateRequest, orderController.bulkUpdateStatus);
router.get('/patient/:patientId', (0, auth_middleware_1.authorize)('admin', 'doctor', 'lab_technician', 'nurse', 'receptionist'), orderController.getOrdersByPatient);
router.get('/doctor/:doctorId', (0, auth_middleware_1.authorize)('admin', 'doctor'), orderController.getOrdersByDoctor);
router.get('/:orderId/pending-tests', (0, auth_middleware_1.authorize)('admin', 'lab_technician'), orderController.getPendingTests);
exports.default = router;
