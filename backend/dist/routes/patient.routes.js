"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = require("express");
const patient_controller_1 = require("../controllers/patient.controller");
const auth_middleware_1 = require("../middlewares/auth.middleware");
const validation_middleware_1 = require("../middlewares/validation.middleware");
const router = (0, express_1.Router)();
const patientController = new patient_controller_1.PatientController();
router.use(auth_middleware_1.authenticate);
router.post('/', (0, auth_middleware_1.authorize)('admin', 'doctor', 'nurse', 'receptionist'), validation_middleware_1.validateRequest, patientController.createPatient);
router.get('/', (0, auth_middleware_1.authorize)('admin', 'doctor', 'lab_technician', 'nurse', 'receptionist'), patientController.getAllPatients);
router.get('/search', (0, auth_middleware_1.authorize)('admin', 'doctor', 'lab_technician', 'nurse', 'receptionist'), patientController.searchPatients);
router.get('/statistics', (0, auth_middleware_1.authorize)('admin', 'doctor'), patientController.getPatientStatistics);
router.get('/recent', (0, auth_middleware_1.authorize)('admin', 'doctor', 'lab_technician', 'nurse', 'receptionist'), patientController.getRecentPatients);
router.get('/:patientId', (0, auth_middleware_1.authorize)('admin', 'doctor', 'lab_technician', 'nurse', 'receptionist'), patientController.getPatientById);
router.get('/mrn/:mrn', (0, auth_middleware_1.authorize)('admin', 'doctor', 'lab_technician', 'nurse', 'receptionist'), patientController.getPatientByMRN);
router.put('/:patientId', (0, auth_middleware_1.authorize)('admin', 'doctor', 'nurse', 'receptionist'), validation_middleware_1.validateRequest, patientController.updatePatient);
router.delete('/:patientId', (0, auth_middleware_1.authorize)('admin'), patientController.deletePatient);
router.get('/:patientId/orders', (0, auth_middleware_1.authorize)('admin', 'doctor', 'lab_technician', 'nurse'), patientController.getPatientWithOrders);
router.get('/:patientId/results', (0, auth_middleware_1.authorize)('admin', 'doctor', 'lab_technician', 'nurse'), patientController.getPatientWithResults);
router.post('/:patientId/medical-conditions', (0, auth_middleware_1.authorize)('admin', 'doctor', 'nurse'), patientController.addMedicalCondition);
router.delete('/:patientId/medical-conditions', (0, auth_middleware_1.authorize)('admin', 'doctor', 'nurse'), patientController.removeMedicalCondition);
router.post('/:patientId/medications', (0, auth_middleware_1.authorize)('admin', 'doctor', 'nurse'), patientController.addMedication);
router.delete('/:patientId/medications', (0, auth_middleware_1.authorize)('admin', 'doctor', 'nurse'), patientController.removeMedication);
router.post('/:patientId/allergies', (0, auth_middleware_1.authorize)('admin', 'doctor', 'nurse'), patientController.addAllergy);
router.delete('/:patientId/allergies', (0, auth_middleware_1.authorize)('admin', 'doctor', 'nurse'), patientController.removeAllergy);
exports.default = router;
